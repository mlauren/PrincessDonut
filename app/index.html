<!-- index.html -->
<!doctype html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <base href="/" />

  <!-- SCROLLS -->
  <!-- load bootstrap and fontawesome via CDN -->
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="styles.css"></script>

  <style>
    a {color:#bb8de2;}

  </style>

  
</head>
<body>
  <div id="webgl"></div>

  <!-- SPELLS -->
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="bower_components/three.js/three.js"></script>
  <script src="bower_components/jsSHA/src/sha1.js"></script>
  <script src="scripts/detector.js"></script>
  <script src="scripts/trackBallControls.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    var socket = io.connect('http://localhost:3030');
    socket.on('news', function (data) {
      console.log(data);
      socket.emit('my other event', { my: 'data' });
    });
  </script>
  <script type="text/javascript">
    $(document).on('ready', function() {
      (function() { 
        'use strict';
        var webglEl = document.getElementById('webgl'); 

        console.log(webglEl);
        if (!Detector.webgl) {
          Detector.addGetWebGLMessage(webglEl);
        }
        THREE.ImageUtils.crossOrigin = ''; 
        var width = window.innerWidth,
            height = window.innerHeight;

        var radius=0.45,
            segments=32,
            rotation=5;

        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(45, width / height, 0.05, 1000);

        camera.position.z = 3;
        camera.position.y = 2;
        camera.position.x = 2;

        var renderer = new THREE.WebGLRenderer();

        renderer.setSize(width, height);
        scene.add(new THREE.AmbientLight(0x553333));

        var light = new THREE.DirectionalLight(0xffffff, .5);

        light.position.set(5, 3, 5);
        scene.add(light);

        var sphere = createSphere(radius, segments);

        sphere.rotation.y = rotation;
        scene.add(sphere);

        var stars = createStars(90, 64);

        scene.add(stars);

        var controls=new THREE.TrackballControls(camera);

        webglEl.appendChild(renderer.domElement);

        render();

        function render() {
          controls.update();

          sphere.rotation.y += 0.05;

          requestAnimationFrame(render);
          renderer.render(scene, camera); 
        } 

        function createSphere(radius, segments) {
          return new THREE.Mesh(new THREE.SphereGeometry(radius, segments, segments), new THREE.MeshPhongMaterial({ map: THREE.ImageUtils.loadTexture('https://cdn.rawgit.com/bubblin/The-Solar-System/master/images/page-60/saturnmap.jpg'), bumpScale: 0.05, specular: new THREE.Color('#190909') })); 
        }

        function createStars(radius, segments) { 
          return new THREE.Mesh(new THREE.SphereGeometry(radius, segments, segments), new THREE.MeshBasicMaterial({ map: THREE.ImageUtils.loadTexture('https://cdn.rawgit.com/bubblin/The-Solar-System/master/images/shared/galaxy_starfield.jpg'), side: THREE.BackSide })); 
        } 
      }());
    });
  </script>
</body>
</html>